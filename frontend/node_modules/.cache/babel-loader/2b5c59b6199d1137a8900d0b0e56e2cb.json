{"remainingRequest":"/home/nalee/Documents/projects/freelance/auth0-work/frontend/node_modules/babel-loader/lib/index.js!/home/nalee/Documents/projects/freelance/auth0-work/frontend/src/auth.js","dependencies":[{"path":"/home/nalee/Documents/projects/freelance/auth0-work/frontend/src/auth.js","mtime":1585427172614},{"path":"/home/nalee/Documents/projects/freelance/auth0-work/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nalee/Documents/projects/freelance/auth0-work/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IGF1dGgwIGZyb20gJ2F1dGgwLWpzJzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOyAvLyBleGNoYW5nZSB0aGUgb2JqZWN0IHdpdGggeW91ciBvd24gZnJvbSB0aGUgc2V0dXAgc3RlcCBhYm92ZS4KCnZhciB3ZWJBdXRoID0gbmV3IGF1dGgwLldlYkF1dGgoewogIGRvbWFpbjogJ25vdGVleC5hdXRoMC5jb20nLAogIGNsaWVudElEOiAnNXV3SDlJR2NBTjhTa1pqUndVVXFrcDZlanBVS3NhMmknLAogIC8vIG1ha2Ugc3VyZSB0aGlzIGxpbmUgaXMgY29udGFpbnMgdGhlIHBvcnQ6IDgwODAKICByZWRpcmVjdFVyaTogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9jYWxsYmFjaycsCiAgLy8gd2Ugd2lsbCB1c2UgdGhlIGFwaS92Mi8gdG8gYWNjZXNzIHRoZSB1c2VyIGluZm9ybWF0aW9uIGFzIHBheWxvYWQKICBhdWRpZW5jZTogJ2h0dHBzOi8vbm90ZWV4LmF1dGgwLmNvbS9hcGkvdjIvJywKICByZXNwb25zZVR5cGU6ICd0b2tlbiBpZF90b2tlbicsCiAgc2NvcGU6ICdvcGVuaWQgcHJvZmlsZScgLy8gZGVmaW5lIHRoZSBzY29wZXMgeW91IHdhbnQgdG8gdXNlCgp9KTsKdmFyIGF1dGggPSBuZXcgVnVlKHsKICBjb21wdXRlZDogewogICAgdG9rZW46IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZF90b2tlbicpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldChpZF90b2tlbikgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIGlkX3Rva2VuKTsKICAgICAgfQogICAgfSwKICAgIGFjY2Vzc1Rva2VuOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGFjY2Vzc1Rva2VuKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc190b2tlbicsIGFjY2Vzc1Rva2VuKTsKICAgICAgfQogICAgfSwKICAgIGV4cGlyZXNBdDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2V4cGlyZXNfYXQnKTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZXhwaXJlc0luKSB7CiAgICAgICAgdmFyIGV4cGlyZXNBdCA9IEpTT04uc3RyaW5naWZ5KGV4cGlyZXNJbiAqIDEwMDAgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V4cGlyZXNfYXQnLCBleHBpcmVzQXQpOwogICAgICB9CiAgICB9LAogICAgdXNlcjogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodXNlcikgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkodXNlcikpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHdlYkF1dGguYXV0aG9yaXplKCk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpZF90b2tlbicpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdleHBpcmVzX2F0Jyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgICAgICB3ZWJBdXRoLmxvZ291dCh7CiAgICAgICAgICByZXR1cm5UbzogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcsCiAgICAgICAgICAvLyBBbGxvd2VkIGxvZ291dCBVUkwgbGlzdGVkIGluIGRhc2hib2FyZAogICAgICAgICAgY2xpZW50SUQ6ICc1dXdIOUlHY0FOOFNrWmpSd1VVcWtwNmVqcFVLc2EyaScgLy8gWW91ciBjbGllbnQgSUQKCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkgewogICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPCB0aGlzLmV4cGlyZXNBdDsKICAgIH0sCiAgICBoYW5kbGVBdXRoZW50aWNhdGlvbjogZnVuY3Rpb24gaGFuZGxlQXV0aGVudGljYXRpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHdlYkF1dGgucGFyc2VIYXNoKGZ1bmN0aW9uIChlcnIsIGF1dGhSZXN1bHQpIHsKICAgICAgICAgIGlmIChhdXRoUmVzdWx0ICYmIGF1dGhSZXN1bHQuYWNjZXNzVG9rZW4gJiYgYXV0aFJlc3VsdC5pZFRva2VuKSB7CiAgICAgICAgICAgIF90aGlzLmV4cGlyZXNBdCA9IGF1dGhSZXN1bHQuZXhwaXJlc0luOwogICAgICAgICAgICBfdGhpcy5hY2Nlc3NUb2tlbiA9IGF1dGhSZXN1bHQuYWNjZXNzVG9rZW47CiAgICAgICAgICAgIF90aGlzLnRva2VuID0gYXV0aFJlc3VsdC5pZFRva2VuOwogICAgICAgICAgICBfdGhpcy51c2VyID0gYXV0aFJlc3VsdC5pZFRva2VuUGF5bG9hZDsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSBlbHNlIGlmIChlcnIpIHsKICAgICAgICAgICAgX3RoaXMubG9nb3V0KCk7CgogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLiRhdXRoID0gYXV0aDsKICB9Cn07"},{"version":3,"sources":["/home/nalee/Documents/projects/freelance/auth0-work/frontend/src/auth.js"],"names":["auth0","Vue","webAuth","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","auth","computed","token","get","localStorage","getItem","set","id_token","setItem","accessToken","expiresAt","expiresIn","JSON","stringify","Date","getTime","user","parse","methods","login","authorize","logout","Promise","resolve","reject","removeItem","returnTo","isAuthenticated","handleAuthentication","parseHash","err","authResult","idToken","idTokenPayload","install","prototype","$auth"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,UAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB,C,CAEA;;AACA,IAAIC,OAAO,GAAG,IAAIF,KAAK,CAACG,OAAV,CAAkB;AAC9BC,EAAAA,MAAM,EAAE,kBADsB;AAE9BC,EAAAA,QAAQ,EAAE,kCAFoB;AAG9B;AACAC,EAAAA,WAAW,EAAE,gCAJiB;AAK9B;AACAC,EAAAA,QAAQ,EAAE,kCANoB;AAO9BC,EAAAA,YAAY,EAAE,gBAPgB;AAQ9BC,EAAAA,KAAK,EAAE,gBARuB,CAQN;;AARM,CAAlB,CAAd;AAWA,IAAIC,IAAI,GAAG,IAAIT,GAAJ,CAAQ;AACjBU,EAAAA,QAAQ,EAAE;AACRC,IAAAA,KAAK,EAAE;AACLC,MAAAA,GAAG,EAAE,eAAW;AACd,eAAOC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAP;AACD,OAHI;AAILC,MAAAA,GAAG,EAAE,aAASC,QAAT,EAAmB;AACtBH,QAAAA,YAAY,CAACI,OAAb,CAAqB,UAArB,EAAiCD,QAAjC;AACD;AANI,KADC;AASRE,IAAAA,WAAW,EAAE;AACXN,MAAAA,GAAG,EAAE,eAAW;AACd,eAAOC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAP;AACD,OAHU;AAIXC,MAAAA,GAAG,EAAE,aAASG,WAAT,EAAsB;AACzBL,QAAAA,YAAY,CAACI,OAAb,CAAqB,cAArB,EAAqCC,WAArC;AACD;AANU,KATL;AAiBRC,IAAAA,SAAS,EAAE;AACTP,MAAAA,GAAG,EAAE,eAAW;AACd,eAAOC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAP;AACD,OAHQ;AAITC,MAAAA,GAAG,EAAE,aAASK,SAAT,EAAoB;AACvB,YAAID,SAAS,GAAGE,IAAI,CAACC,SAAL,CAAeF,SAAS,GAAG,IAAZ,GAAmB,IAAIG,IAAJ,GAAWC,OAAX,EAAlC,CAAhB;AACAX,QAAAA,YAAY,CAACI,OAAb,CAAqB,YAArB,EAAmCE,SAAnC;AACD;AAPQ,KAjBH;AA0BRM,IAAAA,IAAI,EAAE;AACJb,MAAAA,GAAG,EAAE,eAAW;AACd,eAAOS,IAAI,CAACK,KAAL,CAAWb,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAP;AACD,OAHG;AAIJC,MAAAA,GAAG,EAAE,aAASU,IAAT,EAAe;AAClBZ,QAAAA,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BI,IAAI,CAACC,SAAL,CAAeG,IAAf,CAA7B;AACD;AANG;AA1BE,GADO;AAoCjBE,EAAAA,OAAO,EAAE;AACPC,IAAAA,KADO,mBACC;AACN3B,MAAAA,OAAO,CAAC4B,SAAR;AACD,KAHM;AAIPC,IAAAA,MAJO,oBAIE;AACP,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCpB,QAAAA,YAAY,CAACqB,UAAb,CAAwB,cAAxB;AACArB,QAAAA,YAAY,CAACqB,UAAb,CAAwB,UAAxB;AACArB,QAAAA,YAAY,CAACqB,UAAb,CAAwB,YAAxB;AACArB,QAAAA,YAAY,CAACqB,UAAb,CAAwB,MAAxB;AACAjC,QAAAA,OAAO,CAAC6B,MAAR,CAAe;AACbK,UAAAA,QAAQ,EAAE,uBADG;AACsB;AACnC/B,UAAAA,QAAQ,EAAE,kCAFG,CAEiC;;AAFjC,SAAf;AAID,OATM,CAAP;AAUD,KAfM;AAgBPgC,IAAAA,eAhBO,6BAgBW;AAChB,aAAO,IAAIb,IAAJ,GAAWC,OAAX,KAAuB,KAAKL,SAAnC;AACD,KAlBM;AAmBPkB,IAAAA,oBAnBO,kCAmBgB;AAAA;;AACrB,aAAO,IAAIN,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtChC,QAAAA,OAAO,CAACqC,SAAR,CAAkB,UAACC,GAAD,EAAMC,UAAN,EAAqB;AAErC,cAAIA,UAAU,IAAIA,UAAU,CAACtB,WAAzB,IAAwCsB,UAAU,CAACC,OAAvD,EAAgE;AAC9D,YAAA,KAAI,CAACtB,SAAL,GAAiBqB,UAAU,CAACpB,SAA5B;AACA,YAAA,KAAI,CAACF,WAAL,GAAmBsB,UAAU,CAACtB,WAA9B;AACA,YAAA,KAAI,CAACP,KAAL,GAAa6B,UAAU,CAACC,OAAxB;AACA,YAAA,KAAI,CAAChB,IAAL,GAAYe,UAAU,CAACE,cAAvB;AACAV,YAAAA,OAAO;AAER,WAPD,MAOO,IAAIO,GAAJ,EAAS;AACd,YAAA,KAAI,CAACT,MAAL;;AACAG,YAAAA,MAAM,CAACM,GAAD,CAAN;AACD;AAEF,SAdD;AAeD,OAhBM,CAAP;AAiBD;AArCM;AApCQ,CAAR,CAAX;AA6EA,eAAe;AACbI,EAAAA,OAAO,EAAE,iBAAS3C,GAAT,EAAc;AACrBA,IAAAA,GAAG,CAAC4C,SAAJ,CAAcC,KAAd,GAAsBpC,IAAtB;AACD;AAHY,CAAf","sourcesContent":["import auth0 from 'auth0-js'\nimport Vue from 'vue'\n\n// exchange the object with your own from the setup step above.\nlet webAuth = new auth0.WebAuth({\n  domain: 'noteex.auth0.com',\n  clientID: '5uwH9IGcAN8SkZjRwUUqkp6ejpUKsa2i',\n  // make sure this line is contains the port: 8080\n  redirectUri: 'http://localhost:8080/callback',\n  // we will use the api/v2/ to access the user information as payload\n  audience: 'https://noteex.auth0.com/api/v2/', \n  responseType: 'token id_token',\n  scope: 'openid profile' // define the scopes you want to use\n})\n\nlet auth = new Vue({\n  computed: {\n    token: {\n      get: function() {\n        return localStorage.getItem('id_token')\n      },\n      set: function(id_token) {\n        localStorage.setItem('id_token', id_token)\n      }\n    },\n    accessToken: {\n      get: function() {\n        return localStorage.getItem('access_token')\n      },\n      set: function(accessToken) {\n        localStorage.setItem('access_token', accessToken)\n      }\n    },\n    expiresAt: {\n      get: function() {\n        return localStorage.getItem('expires_at')\n      },\n      set: function(expiresIn) {\n        let expiresAt = JSON.stringify(expiresIn * 1000 + new Date().getTime())\n        localStorage.setItem('expires_at', expiresAt)\n      }\n    },\n    user: {\n      get: function() {\n        return JSON.parse(localStorage.getItem('user'))\n      },\n      set: function(user) {\n        localStorage.setItem('user', JSON.stringify(user))\n      }\n    }\n  },\n  methods: {\n    login() {\n      webAuth.authorize()\n    },\n    logout() {\n      return new Promise((resolve, reject) => { \n        localStorage.removeItem('access_token')\n        localStorage.removeItem('id_token')\n        localStorage.removeItem('expires_at')\n        localStorage.removeItem('user')\n        webAuth.logout({\n          returnTo: 'http://localhost:8080', // Allowed logout URL listed in dashboard\n          clientID: '5uwH9IGcAN8SkZjRwUUqkp6ejpUKsa2i', // Your client ID\n        })\n      })\n    },\n    isAuthenticated() {\n      return new Date().getTime() < this.expiresAt\n    },\n    handleAuthentication() {\n      return new Promise((resolve, reject) => {  \n        webAuth.parseHash((err, authResult) => {\n\n          if (authResult && authResult.accessToken && authResult.idToken) {\n            this.expiresAt = authResult.expiresIn\n            this.accessToken = authResult.accessToken\n            this.token = authResult.idToken\n            this.user = authResult.idTokenPayload\n            resolve()\n\n          } else if (err) {\n            this.logout()\n            reject(err)\n          }\n\n        })\n      })\n    }\n  }\n})\n\nexport default {\n  install: function(Vue) {\n    Vue.prototype.$auth = auth\n  }\n}"]}]}